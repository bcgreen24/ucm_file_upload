<?php

function ucm_file_upload_help($path, $arg){
    if($path == 'admin/help#ucm_file_upload'){
        return t('UCM file upload module');
    }
}

function ucm_file_upload_menu(){
    $items = array();
    $items['fileupload'] = array(
        'title'=> 'File Upload',
        'description' => 'Upload files',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('ucm_file_upload_form'),
        'access arguments' => array('Administer features'),
        'type' => MENU_CALLBACK,
    );
    return $items;
    
}

function ucm_file_upload_form($form, &$form_state){
    $form['file'] = array(
       '#type' => 'file',
       '#title' => t('Choose the file to upload'),
       '#size' => 22,
       '#description' => t('Upload a file to the public directory'),
    );
    
    $form['submit'] = array(
       '#type' => 'submit',
        '#value' => t('Upload file'),
        '#submit' => array('ucm_file_upload_submit'),
        );
    return $form;
}

function ucm_file_upload_submit($form, &$form_state){
    
    $data = $form_state['values'];
    drupal_set_message(print_r($data));
    
    
  //$file = $form_state['values']['file'];
  //$file->status = FILE_STATUS_PERMANENT;
  //file_save($file);
  //drupal_set_message(t('The file has been saved. File: @filename.', array('@filename' => $file->filename)));
}

function ucm_file_upload_perm(){
    return array('upload files');
}
